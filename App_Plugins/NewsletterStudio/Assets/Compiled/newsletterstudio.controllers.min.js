!function(){"use strict";angular.module("umbraco").controller("NewsletterStudio.Controllers.Dialogs.DialogTestController",["$http","nsServiceHelper","navigationService","$routeParams","hybridEditorService","$scope",function(t,o,e,n,i,l){var r=this;r.data=l.model.data,r.done=function(){l.model.submit({source:"$scope.model.submit"})},r.close=function(){l.model.close({source:"$scope.model.close"})}}])}(),function(){"use strict";angular.module("umbraco").controller("NewsletterStudio.Controllers.EmailEditorControls.ButtonController",["$scope",function(o){function e(){var t=NewsletterStudio.Utilities.String.toFirstUpper(o.control.buttonSize);o.calcPadding=o.vm.settingWithFallback("","controlButton"+t+"Padding"),o.calcFontSize=o.vm.settingWithFallback("","controlButton"+t+"FontSize")}e(),o.$watch("control.buttonSize",function(t,o){t!==o&&e()},!0)}])}(),function(){"use strict";angular.module("umbraco").controller("NewsletterStudio.Controllers.EmailEditorControls.ButtonEditController",["$scope",function(t){var e=this;return e.toggleOptionsSize=[{text:"S",value:"small",tooltipKey:"ns_small"},{text:"M",value:"medium",tooltipKey:"ns_medium"},{text:"L",value:"large",tooltipKey:"ns_large"}],t.$on("nsSelectedControlChanged",function(t,o){e.control=o}),e.init=function(t,o){e.control=o},e}])}(),function(){"use strict";angular.module("umbraco").controller("NewsletterStudio.Controllers.EmailEditorControls.ImageController",["$scope","mediaResource","entityResource",function(t,o,e){}])}(),function(){"use strict";angular.module("umbraco").controller("NewsletterStudio.Controllers.EmailEditorControls.TextDisplayController",["$scope","$timeout",function(t,o){t.inlineStyles=function(t,o){var e=$("<div>"+t.html+"</div>");return e.find("p,li").css("font-family",o.settingWithFallback(t.fontFamily,"controlTextFontFamily")).css("font-size",o.settingWithFallback(t.fontSize,"controlTextFontSize")),e.find("h1").css("font-family",o.settingWithFallback(t.fontFamily,"controlTextHeading1FontFamily")).css("font-size",o.settingWithFallback(t.fontSize,"controlTextHeading1FontSize")),e.find("h2").css("font-family",o.settingWithFallback(t.fontFamily,"controlTextHeading2FontFamily")).css("font-size",o.settingWithFallback(t.fontSize,"controlTextHeading2FontSize")),e.find("h3").css("font-family",o.settingWithFallback(t.fontFamily,"controlTextHeading3FontFamily")).css("font-size",o.settingWithFallback(t.fontSize,"controlTextHeading3FontSize")),e.find("a").attr("href","#").attr("onclick","return false;").css("color",o.settingWithFallback(t.linkColor,"controlTextLinkColor")),e.prop("innerHTML")}}])}(),function(){"use strict";angular.module("umbraco").controller("NewsletterStudio.Controllers.EmailEditorControls.TextController",["$scope","$timeout",function(i,c){var l,a,r,s=this,e={view:"rte",config:{editor:{toolbar:["code","undo","redo","cut","styleselect","bold","italic","alignleft","aligncenter","alignright","bullist","numlist","link","forecolor","nsMergeFields"],stylesheets:["Newsletter-Studio"],dimensions:{height:300,width:280}}},value:"<p></p>"};function n(o,e,n){var t=o();if(t)e(t);else{var i,l=0,r=function(){var t=o();t?e(t):++l<40?(i=c(r,75),a=i):n&&n()};i=c(r,75),a=i}}return i.$on("nsSelectedControlChanged",function(t,o){s.control=o,s.rteProperty.value=o.html}),i.$on("$destroy",function(){l&&c.cancel(l),a&&c.cancel(a)}),s.init=function(t,o){r=t,s.control=o,s.rteProperty=e,o.html&&(s.rteProperty.value=o.html)},n(function(){return $(".ns-emaileditor-control-rte").find(".umb-rte-editor").attr("id")},function(o){n(function(){if("undefined"!=typeof tinymce)return tinymce},function(t){n(function(){return t.get(o)},function(t){if(r.themeColors){var e=[],o=r.themeColors.split(",");angular.forEach(o,function(t){var o=t.replace("#","");e.push(o),e.push("")}),t.settings.textcolor_map=e}else t.settings.textcolor_map=["FFFFFF","","1B998B","","ED217C","","2D3047","","FFFD82","","FF9B71",""];function n(){NewsletterStudio.Utilities.isDefined(l)&&c.cancel(l),l=c(function(){i.$apply(function(){s.control.html=t.getContent()})},50)}t.on("keyup",function(t){n()}),t.on("change",function(t){n()})},function(){console.error("Could not find TinyMCE editor instance"),alert("Could not find TinyMCE editor instance")})},function(){console.error("Could not locate the TinyMCE."),alert("Could not locate the TinyMCE")})},function(){console.error("All attempts to find RTE by .umb-rte-editor [id=] failed."),alert("Could not find Rich Text Editor id")}),s}])}(),setTimeout(function(){if(Umbraco&&Umbraco.Sys&&Umbraco.Sys.ServerVariables&&Umbraco.Sys.ServerVariables.newsletterStudio&&Umbraco.Sys.ServerVariables.newsletterStudio.isDebugBuild){var t=document.createElement("script");t.src="http://localhost:35729/livereload.js",document.head.appendChild(t),console.log("NewsletterStudio: Started live-reload")}},2500);