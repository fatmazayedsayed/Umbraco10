<div ng-controller="NewsletterStudio.Controllers.TransactionalEmailsController as vm" class="ns-content-wrapper transactional-emails">
    
    <div class="ns-content-header">
        <a href="#/newsletterStudio/section/transactional/{{vm.workspaceKey}}?e=-1" class="btn btn-outline">
            <localize key="ns_createNew"></localize>
        </a>
    </div>

    <div class="ns-content ns-content--full-height">
        <div>
            <div>
                <button class="btn" ng-click="vm.setFilter('all')" ng-class="{'btn-action' : vm.filter.filterState=='all'}"><localize key="ns_all"></localize></button>
                <button class="btn" ng-click="vm.setFilter('byme')" ng-class="{'btn-action' : vm.filter.filterState=='byme'}"><localize key="ns_byMe"></localize></button>
            </div>
            <div>
                <input type="text"
                       localize="placeholder"
                       placeholder="@placeholders_filter"
                       ng-model="vm.filter.search"
                       ng-change="vm.setSearch()"
                       prevent-enter-submit
                       no-dirty-check>
            </div>
        </div>

        <div class="ns-box-list ns-box-list-campaigns">

            <div ng-repeat="transactional in vm.data.emails.items track by transactional.id">
                <div>
                    <div class="iframe-wrapper">
                        <ns-preview-iframe src="vm.getPreviewUrl(transactional)"></ns-preview-iframe>
                    </div>
                </div>
                <div>
                    <div>
                        <h4>
                            <a ng-click="vm.openEdit(transactional)">{{transactional.name}}</a>
                        </h4>
                    </div>
                    <div>
                        <p>
                        </p>
                    </div>
                </div>
                <div>
                <span class="ns-alert">
                </span>
                </div>
                <div>
                    <div class="btn-group">
                        <a class="btn ns-btn-action btn-action" ng-click="vm.openEdit(transactional)">
                            <span><localize key="ns_edit"></localize></span>
                        </a>
                        
                        <a class="btn btn-action dropdown-toggle umb-button-group__toggle"
                           ng-click="transactional.showActionMenu = !transactional.showActionMenu">
                            <span class="caret"></span>
                        </a>

                        <umb-dropdown ng-if="transactional.showActionMenu" on-close="campaign.showActionMenu = false">
                            <umb-dropdown-item>
                                <a ng-click="vm.openEdit(transactional)" ng-if="transactional.state != 'sent'">
                                    <localize key="ns_edit"></localize>
                                </a>
                            </umb-dropdown-item>
                            <umb-dropdown-item>
                                <a ng-click="vm.duplicate(transactional)" data-elm="c-duplicate">
                                    <localize key="ns_duplicate"></localize>
                                </a>
                            </umb-dropdown-item>
                            <umb-dropdown-item>
                                <a ng-click="vm.delete(transactional)" data-elm="c-remove">
                                    <localize key="ns_remove"></localize>
                                </a>
                            </umb-dropdown-item>
                        </umb-dropdown>
                    </div>
                </div>
            </div>
        </div>
        <umb-pagination page-number="vm.data.campaigns.currentPage"
                        total-pages="vm.data.campaigns.totalPages"
                        on-next="vm.nextPage"
                        on-prev="vm.prevPage"
                        on-go-to-page="vm.goToPage">
        </umb-pagination>
    </div>
</div>